---
import { datocms } from "@lib";
import query from "./_index.query.graphql";
import { site } from "@lib/data";
import { Default } from "@layouts";
import { Blocks } from "@blocks";

export async function getStaticPaths() {
  return site.locales.map((locale: string) => ({ params: { locale } }));
}

const { locale } = Astro.params;

const { page } = await datocms.request(query, { locale });
---

<Default>
  <Blocks blocks={page.body} />
</Default>
